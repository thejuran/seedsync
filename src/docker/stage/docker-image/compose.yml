version: "3.4"
services:
  myapp:
    image: ${STAGING_REGISTRY}/seedsync:${STAGING_VERSION}
    container_name: seedsync_test_e2e_myapp
    hostname: myapp
    healthcheck:
      test: ["CMD", "curl", "-f", "http://127.0.0.1:8800/server/status"]
      interval: 5s
      timeout: 3s
      retries: 24
      start_period: 30s
    # Explicit DNS to avoid resolution issues in CI
    dns:
      - 8.8.8.8
      - 8.8.4.4
    networks:
      - e2e_network

networks:
  e2e_network:
    driver: bridge
