// Bootstrap post-compilation overrides
// These are imported AFTER Bootstrap components are compiled
// Use for overriding specific Bootstrap component styles

@use 'bootstrap-variables' as bv;
@use 'bootstrap/scss/functions' as fn;

// Bootstrap modal customization (migrated from styles.scss)
.modal-body {
    /* break up long text */
    overflow-wrap: normal;
    hyphens: auto;
    word-break: break-word;
}

// Dark dropdown theme (for file options dropdowns)
// Uses CSS variables so components only need data-bs-theme="dark" attribute
[data-bs-theme="dark"] {
  .dropdown-menu {
    // Background and border
    --bs-dropdown-bg: #{bv.$primary-color};
    --bs-dropdown-border-color: #{bv.$primary-dark-color};
    --bs-dropdown-box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.3);

    // Item colors
    --bs-dropdown-link-color: white;
    --bs-dropdown-link-hover-color: white;
    --bs-dropdown-link-hover-bg: #{bv.$secondary-dark-color};
    --bs-dropdown-link-active-color: white;
    --bs-dropdown-link-active-bg: #{bv.$secondary-dark-color};
    --bs-dropdown-link-disabled-color: rgba(white, 0.65);
  }

  // Toggle button pressed/open state
  .dropdown-toggle.show {
    background-color: bv.$secondary-dark-color;
    border-color: bv.$secondary-darker-color;
  }
}

// Dropdown fade animation (~150ms per user decision)
.dropdown-menu {
  opacity: 0;
  transition: opacity 0.15s ease-in-out;
}

.dropdown-menu.show {
  opacity: 1;
}

// Dropdown item hover transition (~100ms per user decision)
.dropdown-item {
  transition: background-color 0.1s ease-in-out;
}

// ============================================================================
// Theme-Aware Form Styling
// ============================================================================
// Form inputs adapt to the active theme. Light mode uses Bootstrap defaults
// (no overrides needed). Dark mode needs explicit dark backgrounds.

[data-bs-theme="dark"] {
  .form-control {
    background-color: #212529;
    color: #dee2e6;
    border-color: #495057;

    &::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    &:focus {
      background-color: #212529;
      color: #dee2e6;
    }

    &:disabled {
      background-color: #1a1a1a;
      opacity: 0.65;
    }
  }

  .form-check-input {
    background-color: #212529;
    border-color: #495057;

    &:focus {
      border-color: fn.tint-color(bv.$secondary, 50%);
    }

    &:disabled {
      opacity: 0.5;
    }
  }
}
