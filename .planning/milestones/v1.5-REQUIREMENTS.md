# Requirements: v1.5 Backend Testing (Archived)

*Milestone shipped: 2026-02-08*

## Must Have

- [x] **REQ-01**: Add pytest-cov dependency and coverage configuration to pyproject.toml — *Phase 15*
- [x] **REQ-02**: Establish baseline coverage measurement with HTML and terminal reports — *Phase 15 + 19*
- [x] **REQ-03**: Unit tests for all common module gaps (constants, context, error, localization, types) — *Phase 16*
- [x] **REQ-04**: Unit tests for controller.py covering command queuing, model operations, listener callbacks, and error handling — *Phase 18*
- [x] **REQ-05**: Unit tests for controller_job.py covering Job lifecycle contract — *Phase 18*
- [x] **REQ-06**: Unit tests for all web handler gaps (auto_queue, config, server, status, stream_heartbeat, stream_model, stream_status) — *Phase 17*
- [x] **REQ-07**: All existing 711 tests continue passing (zero regressions) — *All phases*
- [x] **REQ-08**: Create conftest.py with shared fixtures (logger setup, common mocks) — *Phase 15*

## Should Have

- [x] **REQ-09**: Coverage threshold enforced in pytest config (fail if below baseline) — *Phase 19*
- [x] **REQ-10**: Improve test quality — extract repeated patterns into shared fixtures and factories — *Phase 15*
- [x] **REQ-11**: Add Make target for local coverage reporting (`make coverage`) — *Phase 15*

## Out of Scope

- E2E tests (Playwright) — separate concern
- Angular unit tests — frontend, not backend
- Performance testing / load testing
- Refactoring production code to improve testability (test what exists)
- Adding type annotations to Python code
- CI/CD pipeline changes (coverage gates in GitHub Actions)

## Success Criteria — All Met

1. [x] `poetry run pytest` passes all tests (existing + new) — 952 tests, 817 passed
2. [x] Coverage report generated with `poetry run pytest --cov` — 84% with HTML + terminal
3. [x] Common module has 100% test coverage — all 5 modules at 100%
4. [x] Controller module has unit tests (not just integration) — 106 tests
5. [x] All web handlers have unit tests (not just integration) — 69 tests
6. [x] Shared fixtures reduce test boilerplate — 3 fixtures in conftest.py
7. [x] Coverage baseline established and documented — 84%, fail_under enforced

---
*Created: 2026-02-08*
*Archived: 2026-02-08*
*Milestone: v1.5 Backend Testing*
