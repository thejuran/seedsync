# Requirements: v1.7 Sonarr Integration (Archived)

*Milestone shipped: 2026-02-10*

## Connection

- [x] **CONN-01**: User can configure Sonarr connection (URL, API key) in Settings — *Phase 22*
- [x] **CONN-02**: User can enable/disable Sonarr integration via toggle — *Phase 22*
- [x] **CONN-03**: User can test Sonarr connection and see success/failure result — *Phase 22*

## Import Detection

- [x] **IMPRT-01**: SeedSync polls Sonarr queue to detect when files are imported — *Phase 23*
- [x] **IMPRT-02**: Files show import status badge (Imported) in file list — *Phase 24*
- [x] **IMPRT-03**: Imported files tracked persistently to prevent re-processing — *Phase 23*

## Auto-Delete

- [x] **DEL-01**: User can enable/disable auto-delete of local files after Sonarr import (global toggle) — *Phase 25*
- [x] **DEL-02**: Auto-delete only removes local copy, never remote seedbox files — *Phase 25*
- [x] **DEL-03**: Configurable safety delay before deletion (default 60s) prevents race conditions — *Phase 25*

## Notifications

- [x] **NOTIF-01**: Import events appear in existing log viewer with filename and timestamp — *Phase 24*
- [x] **NOTIF-02**: In-app toast notification shown when Sonarr imports a file (via SSE) — *Phase 24*

## Safety

- [x] **SAFE-01**: Dry-run mode detects imports and logs what would be deleted without actually deleting — *Phase 25*

## Out of Scope

| Feature | Reason |
|---------|--------|
| Manage Sonarr queue from SeedSync | Scope creep — Sonarr already has excellent queue UI |
| Delete remote seedbox files | Breaks seeding — user keeps remote for seeding |
| Bi-directional Sonarr sync | SeedSync is read-only consumer of Sonarr state |
| Track all Sonarr activity | Only track imports for files SeedSync synced |
| New ModelFile states | Architecture: separate tracking (BoundedOrderedSet), not new State enum values |

## Success Criteria — All Met

1. [x] 12/12 requirements satisfied
2. [x] 15/15 cross-phase integration points connected
3. [x] 5/5 E2E flows verified
4. [x] 6-layer safety system verified (local-only, dry-run, hot-toggle, missing file, clean shutdown, daemon threads)
5. [x] 38+ new unit tests added
6. [x] 9 UAT tests passed

---
*Created: 2026-02-10*
*Archived: 2026-02-10*
*Milestone: v1.7 Sonarr Integration*
