---
phase: 28-fix-pre-existing-test-failures
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true

must_haves:
  truths:
    - "All 3 previously-failing tests in model-file.service.spec.ts pass"
    - "All Angular unit tests pass with zero failures (381+ tests)"
    - "No regressions in any other test files"
  artifacts:
    - path: "src/angular/src/app/tests/unittests/services/files/model-file.service.spec.ts"
      provides: "17 passing tests including the 3 that were previously failing"
      contains: "import_status: ModelFile.ImportStatus.NONE"
  key_links:
    - from: "src/angular/src/app/tests/unittests/services/files/model-file.service.spec.ts"
      to: "src/angular/src/app/models/model-file.ts"
      via: "Test expectations include import_status field matching parser default"
      pattern: "import_status.*ImportStatus\\.NONE"
---

<objective>
Verify that the 3 pre-existing test failures in model-file.service.spec.ts are resolved and
all Angular unit tests pass with zero failures.

Purpose: These failures were already fixed in commit 428bd18 during Phase 24 (2026-02-10).
Phase 28 confirms the fix is still in place, documents the resolution, and closes out the
v1.8 milestone.

Output: Verified test suite with 381+ tests passing. No code changes needed.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-fix-pre-existing-test-failures/28-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify all Angular unit tests pass with zero failures</name>
  <files>
    src/angular/src/app/tests/unittests/services/files/model-file.service.spec.ts
  </files>
  <action>
    This is a verification-only task. No code changes are needed.

    The 3 test failures in model-file.service.spec.ts were already fixed in commit 428bd18
    (2026-02-10) during Phase 24. The fix added `import_status: ModelFile.ImportStatus.NONE`
    to 4 manually constructed expected ModelFile objects in the test file. This aligned the
    test expectations with the `fromJson()` parser defaults introduced when Phase 24-01 added
    the `import_status` field to the ModelFile class.

    **Steps:**
    1. Run the full Angular unit test suite in single-run headless mode to confirm all tests pass.
    2. Confirm model-file.service.spec.ts specifically has 17/17 tests passing.
    3. Confirm total test count is 381+ with 0 failures.
    4. Verify the fix is present by confirming the test file contains `import_status: ModelFile.ImportStatus.NONE`
       in the expected ModelFile objects.

    **If any tests fail:** Investigate the failure. If it is a regression from Phase 26 or 27 work
    (Radarr/webhooks), fix it. If it is a new issue unrelated to Phase 28, document it and proceed
    with Phase 28 closure.

    **No code changes expected.** This task confirms existing state.
  </action>
  <verify>
    Run Angular unit tests in single-run headless mode:
    `cd /Users/julianamacbook/seedsync/src/angular && npx ng test --watch=false --browsers=ChromeHeadless`

    Expected output:
    - 381+ tests executed
    - 0 failures
    - All 17 tests in "Testing model file service" suite pass

    Verify fix is present:
    `grep -c "import_status: ModelFile.ImportStatus.NONE" /Users/julianamacbook/seedsync/src/angular/src/app/tests/unittests/services/files/model-file.service.spec.ts`
    Expected: 4 (four occurrences of the fix)
  </verify>
  <done>
    All Angular unit tests pass (381+ tests, 0 failures). The 3 previously-failing tests in
    model-file.service.spec.ts are confirmed passing. The import_status fix from commit 428bd18
    is verified in place. Phase 28 requirements TEST-01 and TEST-02 are fulfilled.
  </done>
</task>

</tasks>

<verification>
1. Angular test suite passes: `cd /Users/julianamacbook/seedsync/src/angular && npx ng test --watch=false --browsers=ChromeHeadless` shows 381+ tests, 0 failures
2. model-file.service.spec.ts has 17/17 passing tests
3. Fix is present: 4 occurrences of `import_status: ModelFile.ImportStatus.NONE` in test file
4. No regressions in other test files
</verification>

<success_criteria>
- All 381+ Angular unit tests pass with 0 failures
- All 17 tests in model-file.service.spec.ts pass
- The import_status fix (commit 428bd18) is confirmed present in the test file
- Requirements TEST-01 and TEST-02 are fulfilled
</success_criteria>

<output>
After completion, create `.planning/phases/28-fix-pre-existing-test-failures/28-01-SUMMARY.md`
</output>
