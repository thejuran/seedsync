---
phase: 04-button-standardization-file-actions
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/app/pages/files/file.component.html
  - src/angular/src/app/pages/files/file.component.scss
autonomous: false

must_haves:
  truths:
    - "Hidden .actions section uses Bootstrap button elements instead of div elements"
    - "Hidden .actions buttons use correct semantic variants (Queue=primary, Stop=danger, Extract=secondary)"
    - ".actions section remains hidden (display: none) for virtual scroll compatibility"
    - "File row hover and selection states continue to work correctly"
  artifacts:
    - path: "src/angular/src/app/pages/files/file.component.html"
      provides: "Hidden actions with Bootstrap buttons"
      contains: "btn btn-"
    - path: "src/angular/src/app/pages/files/file.component.scss"
      provides: "Updated button styling for Bootstrap migration"
      contains: "display: none"
  key_links:
    - from: "file.component.html"
      to: "file.component.ts"
      via: "(click) event handlers"
      pattern: "\\(click\\)=\"on"
---

<objective>
Migrate the hidden .actions section in file.component from div-based custom buttons to Bootstrap button elements. Also verify all button standardization visually.

Purpose: Complete the Dashboard page button migration for consistency, even for hidden elements. Prepare for potential future use when virtual scroll constraints change.

Output: file.component with Bootstrap buttons in hidden .actions, visual verification of all button changes.
</objective>

<execution_context>
@/Users/julianamacbook/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianamacbook/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-button-standardization-file-actions/04-CONTEXT.md
@.planning/phases/04-button-standardization-file-actions/04-RESEARCH.md
@src/angular/src/app/pages/files/file.component.html
@src/angular/src/app/pages/files/file.component.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate file.component hidden .actions to Bootstrap buttons</name>
  <files>
    src/angular/src/app/pages/files/file.component.html
    src/angular/src/app/pages/files/file.component.scss
  </files>
  <action>
In file.component.html, migrate the .actions section (lines ~95-136):

Replace each div-based button with a Bootstrap button element:

```html
<!-- BEFORE -->
<div class="button" appClickStopPropagation
     [attr.disabled]="isQueueable() ? null : true"
     (click)="!isQueueable() || onQueue(file)"
     [class.loading]="activeAction == FileAction.QUEUE">
    <div class="loader"></div>
    <img src="assets/icons/queue.svg" />
    <div class="text"><span>Queue</span></div>
</div>

<!-- AFTER -->
<button class="btn btn-primary action-button" appClickStopPropagation
        [disabled]="!isQueueable()"
        (click)="onQueue(file)"
        [class.loading]="activeAction === FileAction.QUEUE">
    <span *ngIf="activeAction === FileAction.QUEUE"
          class="spinner-border spinner-border-sm"
          aria-hidden="true"></span>
    <img *ngIf="activeAction !== FileAction.QUEUE"
         src="assets/icons/queue.svg" alt="" />
    <span class="text">Queue</span>
</button>
```

Apply this pattern to all 5 buttons:
1. Queue: `btn btn-primary action-button`
2. Stop: `btn btn-danger action-button`
3. Extract: `btn btn-secondary action-button`
4. Delete Local: `btn btn-danger action-button`
5. Delete Remote: `btn btn-danger action-button`

Key changes:
- Change `<div class="button">` to `<button class="btn btn-{variant} action-button">`
- Change `[attr.disabled]="isQueueable() ? null : true"` to `[disabled]="!isQueueable()"`
- Change `(click)="!isQueueable() || onQueue(file)"` to `(click)="onQueue(file)"` (Angular handles disabled)
- Replace custom `.loader` with Bootstrap `spinner-border spinner-border-sm`
- Use `*ngIf` to toggle between spinner and icon
- Flatten text structure: `<div class="text"><span>Queue</span></div>` to `<span class="text">Queue</span>`

In file.component.scss:

1. Update `.actions .button` selector to `.actions .action-button` or `.actions button`
2. Remove `@extend %button` - Bootstrap handles base button styling
3. Keep `display: none` on `.actions` (critical for virtual scroll)
4. Keep `filter: invert(1)` on icons for white-on-color appearance
5. Simplify button styling since Bootstrap handles sizing and states
6. Remove custom `.loader` keyframe animation - using Bootstrap spinner instead

Updated SCSS for .actions section:
```scss
/* actions - hidden for virtual scroll, but migrated to Bootstrap for consistency */
.actions {
    display: none;  /* CRITICAL: Keep hidden for virtual scroll */
    width: 100%;
    flex-direction: row;
    justify-content: flex-end;
    flex-wrap: wrap;
    margin-bottom: -10px;
}

.actions .action-button {
    /* 60x60 square buttons with stacked icon/text */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 60px;
    min-width: 60px;
    height: 60px;
    margin-bottom: 10px;
    margin-right: 10px;
    padding: 4px;

    &:last-child {
        margin-right: 0;
    }

    img {
        width: 25px;
        height: 25px;
        filter: invert(1);
    }

    .text {
        font-size: 12px;
        text-align: center;
        line-height: 12px;
        margin-top: 4px;
    }

    &:disabled img {
        opacity: 0.5;
    }

    /* Loading state with Bootstrap spinner */
    &.loading {
        pointer-events: none;
    }
}
```

Remove the old %button styling, @keyframes spin, and custom .loader styles.
  </action>
  <verify>
1. Run: `grep -n "class=\"button\"" src/angular/src/app/pages/files/file.component.html` returns no results (divs migrated)
2. Run: `grep -n "@extend %button" src/angular/src/app/pages/files/file.component.scss` returns no results
3. Run: `grep -n "display: none" src/angular/src/app/pages/files/file.component.scss` confirms .actions is still hidden
4. Run: `cd /Users/julianamacbook/seedsync && make run-tests-angular` passes
  </verify>
  <done>
file.component hidden .actions uses Bootstrap buttons with correct variants. %button extension removed. .actions remains hidden for virtual scroll. Angular tests pass.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete button standardization for Dashboard file actions:
- file-actions-bar buttons migrated to correct variants (if 04-01 complete)
- bulk-actions-bar buttons migrated to correct variants (if 04-01 complete)
- file.component hidden .actions migrated to Bootstrap buttons
  </what-built>
  <how-to-verify>
1. Start the Angular dev server: `cd /Users/julianamacbook/seedsync/src/angular && node_modules/@angular/cli/bin/ng serve`
2. Open http://localhost:4200 in browser
3. Navigate to the Dashboard (Files page)

**Verify file-actions-bar (single file selection):**
4. Click on any file row to select it - the file-actions-bar should appear at the top
5. Verify button colors:
   - Queue button is BLUE (btn-primary)
   - Stop button is RED (btn-danger) - NOT yellow
   - Extract button is GRAY (btn-secondary) - NOT cyan
   - Delete Local button is SOLID RED (btn-danger) - NOT outline
   - Delete Remote button is RED (btn-danger)
6. Verify button sizing looks consistent (~38px height, larger than before)
7. Verify disabled buttons appear faded (65% opacity)
8. Test click: Click Queue on an unqueued file - verify it queues

**Verify bulk-actions-bar (multi-file selection):**
9. Use checkboxes to select multiple files
10. Verify the bulk-actions-bar appears with same color scheme as above
11. Verify counts display correctly next to each action

**Verify buttons function correctly:**
12. Click Stop on a downloading file - verify it stops
13. Click Extract on an extractable file - verify extraction starts

If all buttons display correctly and function properly, type "approved".
If issues found, describe them for fixing.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:

1. **No legacy button divs:** `grep -rn "class=\"button\"" src/angular/src/app/pages/files/file.component.html` returns no results
2. **No %button extension in file.component:** `grep -n "@extend %button" src/angular/src/app/pages/files/file.component.scss` returns no results
3. **Variant consistency:** All Dashboard file action buttons use semantic variants (primary, danger, secondary)
4. **Visual verification:** Human confirmed buttons display and function correctly
</verification>

<success_criteria>
- Hidden .actions section uses Bootstrap button elements
- Correct variants applied: Queue=primary, Stop=danger, Extract=secondary, Delete=danger
- .actions remains hidden (display: none) for virtual scroll compatibility
- Icon styling preserved (white icons on colored backgrounds)
- Loading state uses Bootstrap spinner instead of custom loader
- All buttons function correctly when clicked
- Human verification passed
</success_criteria>

<output>
After completion, create `.planning/phases/04-button-standardization-file-actions/04-02-SUMMARY.md`
</output>
