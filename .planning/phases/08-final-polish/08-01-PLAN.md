---
phase: 08-final-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/app/common/_common.scss
  - src/angular/src/app/common/_bootstrap-variables.scss
  - src/angular/src/app/common/_bootstrap-overrides.scss
  - src/angular/src/app/pages/files/file-options.component.scss
autonomous: true

must_haves:
  truths:
    - "All E2E tests pass in CI-equivalent environment"
    - "All Angular unit tests pass"
    - "No unused SCSS placeholders or variables remain"
    - "Build succeeds after cleanup"
  artifacts:
    - path: "src/angular/src/app/common/_common.scss"
      provides: "Common SCSS variables and imports"
      constraint: "No unused variables or placeholders"
    - path: "src/angular/src/app/common/_bootstrap-variables.scss"
      provides: "Bootstrap variable overrides"
      constraint: "Only actively used overrides remain"
  key_links:
    - from: "E2E tests"
      to: "application functionality"
      via: "Playwright test runner"
      pattern: "make run-tests-e2e"
    - from: "SCSS files"
      to: "Angular build"
      via: "ng build compilation"
      pattern: "npm run build"
---

<objective>
Run full test suite, identify and remove unused SCSS code, and verify build integrity after cleanup

Purpose: Validates that v1.1 changes (dropdown migration, form standardization) haven't broken functionality and removes dead code from the codebase
Output: Passing test suite and cleaned SCSS files
</objective>

<execution_context>
@/Users/julianamacbook/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianamacbook/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-dropdown-migration/06-01-SUMMARY.md
@.planning/phases/07-form-input-standardization/07-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run full E2E and unit test suites</name>
  <files>N/A (test execution only)</files>
  <action>
Run both test suites to establish baseline and verify no regressions from v1.1 work:

1. Run Angular unit tests:
   ```bash
   cd src/angular && npm test -- --watch=false
   ```
   Expected: 387 tests pass (from STATE.md baseline)

2. Run E2E tests in Docker (CI-equivalent environment):
   ```bash
   make run-tests-e2e STAGING_VERSION=latest SEEDSYNC_ARCH=amd64
   ```
   Expected: All E2E tests pass

Document any failures for investigation before proceeding.
  </action>
  <verify>
- `npm test -- --watch=false` exits with code 0
- `make run-tests-e2e` exits with code 0
- Console output shows expected test counts
  </verify>
  <done>All 387 unit tests pass AND all E2E tests pass with no failures</done>
</task>

<task type="auto">
  <name>Task 2: Identify and remove unused SCSS code</name>
  <files>
src/angular/src/app/common/_common.scss
src/angular/src/app/common/_bootstrap-variables.scss
src/angular/src/app/common/_bootstrap-overrides.scss
src/angular/src/app/pages/files/file-options.component.scss
  </files>
  <action>
Search for and remove unused SCSS patterns that were superseded by Bootstrap native components.

**Step 1: Search for SCSS placeholder definitions and @extend usage**
```bash
grep -rn "^%" src/angular/src/app --include="*.scss"
grep -rn "@extend" src/angular/src/app --include="*.scss"
```
Placeholders defined but never extended = safe to remove.

**Step 2: Search for CSS variables defined vs used**
```bash
# Find all custom property definitions
grep -rn "\-\-.*:" src/angular/src/app --include="*.scss"
# Find all custom property usages
grep -rn "var(--" src/angular/src/app --include="*.scss"
```
Variables defined but never referenced = safe to remove (unless Bootstrap uses them internally).

**Step 3: Check for old pre-v1.0 patterns**
Look for patterns that were replaced during button standardization (Phase 4-5):
- Old %button placeholder references
- Hard-coded colors that should be Bootstrap variables

**Step 4: For each identified item:**
- Verify it's not used anywhere (including Angular templates via [ngClass] or [class.name] bindings)
- Remove if confirmed unused
- Run `npm run build` after each removal to verify compilation

**IMPORTANT:** Be conservative. If unsure whether something is used, leave it. Angular's ViewEncapsulation can hide usages from simple grep.

Do NOT remove:
- Bootstrap CSS variable overrides (--bs-*) used by Bootstrap internals
- Variables referenced in component SCSS that imports _common.scss
- Any SCSS that might be referenced dynamically
  </action>
  <verify>
- `npm run build` succeeds after all removals
- No SCSS compilation errors
- Grep confirms removed patterns no longer exist
  </verify>
  <done>All identified unused SCSS removed, build succeeds, no orphan placeholders or variables</done>
</task>

<task type="auto">
  <name>Task 3: Final test verification after cleanup</name>
  <files>N/A (test execution only)</files>
  <action>
Re-run full test suite after SCSS cleanup to confirm no regressions:

1. Run Angular unit tests:
   ```bash
   cd src/angular && npm test -- --watch=false
   ```

2. Run linting to catch any issues:
   ```bash
   cd src/angular && npm run lint
   ```

3. Run production build to verify bundle compiles:
   ```bash
   cd src/angular && npm run build
   ```

All three must succeed. If any fail, investigate and fix before completing plan.
  </action>
  <verify>
- `npm test -- --watch=false` exits with code 0
- `npm run lint` exits with code 0 (or warnings only)
- `npm run build` exits with code 0
  </verify>
  <done>Unit tests, linting, and production build all pass after cleanup</done>
</task>

</tasks>

<verification>
Phase verification for POLISH-01 and POLISH-04:
- [ ] All 387 Angular unit tests pass
- [ ] All E2E tests pass in Docker environment
- [ ] No unused SCSS placeholders (%name) exist
- [ ] No unused @extend directives exist
- [ ] Production build succeeds
- [ ] Lint passes (warnings acceptable)
</verification>

<success_criteria>
1. E2E test suite passes (POLISH-01)
2. Unit test count unchanged (387)
3. Unused SCSS removed (POLISH-04)
4. Build integrity maintained
</success_criteria>

<output>
After completion, create `.planning/phases/08-final-polish/08-01-SUMMARY.md`
</output>
