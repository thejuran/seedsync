---
phase: 01-bootstrap-scss-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/app/common/_bootstrap-variables.scss
  - src/angular/src/app/common/_bootstrap-overrides.scss
  - src/angular/src/styles.scss
  - src/angular/angular.json
autonomous: true

must_haves:
  truths:
    - "Build compiles successfully with `ng build` (no errors)"
    - "Unit tests pass with `ng test --no-watch --browsers=ChromeHeadless`"
    - "All pages render with identical visual appearance to pre-migration state"
    - "No Sass deprecation warnings appear in build output"
  artifacts:
    - path: "src/angular/src/app/common/_bootstrap-variables.scss"
      provides: "Empty placeholder for Bootstrap variable overrides"
      contains: "Override Bootstrap variables here"
    - path: "src/angular/src/app/common/_bootstrap-overrides.scss"
      provides: "Post-compilation Bootstrap overrides"
      contains: ".modal-body"
    - path: "src/angular/src/styles.scss"
      provides: "Main stylesheet with Bootstrap SCSS imports"
      contains: "@import '../node_modules/bootstrap/scss/functions'"
    - path: "src/angular/angular.json"
      provides: "Build configuration with silenceDeprecations"
      contains: "silenceDeprecations"
  key_links:
    - from: "src/angular/src/styles.scss"
      to: "node_modules/bootstrap/scss"
      via: "@import statements in correct order"
      pattern: "@import.*bootstrap/scss/functions.*@import.*bootstrap/scss/variables"
    - from: "src/angular/angular.json"
      to: "src/styles.scss"
      via: "styles array without bootstrap.min.css"
      pattern: '"styles".*"src/styles.scss"'
---

<objective>
Migrate from pre-compiled Bootstrap CSS to customizable Bootstrap SCSS source files.

Purpose: Enable Bootstrap customization via variable overrides while maintaining identical visual appearance. This is infrastructure-only - no visual changes should occur.

Output: Build system configured to compile Bootstrap from SCSS source with proper import order and deprecation silencing.
</objective>

<execution_context>
@/Users/julianamacbook/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianamacbook/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-bootstrap-scss-setup/01-RESEARCH.md

Source files to modify:
@src/angular/src/styles.scss
@src/angular/src/app/common/_common.scss
@src/angular/angular.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Bootstrap SCSS infrastructure files</name>
  <files>
    src/angular/src/app/common/_bootstrap-variables.scss
    src/angular/src/app/common/_bootstrap-overrides.scss
  </files>
  <action>
Create two new SCSS files in `src/angular/src/app/common/`:

1. **_bootstrap-variables.scss** - Empty placeholder for future variable overrides:
```scss
// Bootstrap variable overrides
// Override Bootstrap variables here, BEFORE Bootstrap's variables are imported
// These are imported after functions but before variables in styles.scss
//
// Example overrides (commented out for Phase 1 - maintaining identical appearance):
// $primary: #337BB7;
// $font-family-base: Verdana, sans-serif;
```

2. **_bootstrap-overrides.scss** - Post-compilation overrides (move existing `.modal-body` from styles.scss):
```scss
// Bootstrap post-compilation overrides
// These are imported AFTER Bootstrap components are compiled
// Use for overriding specific Bootstrap component styles

// Bootstrap modal customization (migrated from styles.scss)
.modal-body {
    /* break up long text */
    overflow-wrap: normal;
    hyphens: auto;
    word-break: break-word;
}
```
  </action>
  <verify>
Both files exist:
- `ls src/angular/src/app/common/_bootstrap-variables.scss`
- `ls src/angular/src/app/common/_bootstrap-overrides.scss`
  </verify>
  <done>Both SCSS infrastructure files created with appropriate content and comments.</done>
</task>

<task type="auto">
  <name>Task 2: Update styles.scss with Bootstrap SCSS imports</name>
  <files>src/angular/src/styles.scss</files>
  <action>
Replace the entire contents of `src/angular/src/styles.scss` with Bootstrap SCSS imports in the correct order. The import order is critical:

1. Bootstrap functions (required for variable calculations)
2. Bootstrap variable overrides (our customizations)
3. Bootstrap variables and variables-dark
4. Bootstrap maps, mixins, root
5. All Bootstrap components (import ALL to ensure no visual changes)
6. Bootstrap utilities API
7. Bootstrap post-compilation overrides
8. Custom application styles

The file should contain:
- `@import '../node_modules/bootstrap/scss/functions'` first
- `@import 'app/common/bootstrap-variables'` second
- All Bootstrap component imports (utilities through helpers)
- `@import '../node_modules/bootstrap/scss/utilities/api'` for utilities API
- `@import 'app/common/bootstrap-overrides'` after Bootstrap
- `@import 'app/common/common'` (changed from @use to @import for consistency)
- Existing custom styles (html, body, input, div rules)

IMPORTANT: Remove the `.modal-body` block from styles.scss since it's now in `_bootstrap-overrides.scss`.

The existing `@use 'app/common/common' as *;` should be changed to `@import 'app/common/common';` for consistency with the @import syntax used by Bootstrap.
  </action>
  <verify>
Run from src/angular directory:
```bash
grep -n "functions" src/styles.scss
grep -n "bootstrap-variables" src/styles.scss
grep -n "bootstrap-overrides" src/styles.scss
```
Verify import order: functions appears before variables, bootstrap-overrides appears after utilities/api.
  </verify>
  <done>styles.scss imports Bootstrap SCSS in correct order (functions -> overrides -> variables -> components -> utilities API -> post-compilation overrides -> custom styles).</done>
</task>

<task type="auto">
  <name>Task 3: Update angular.json build configuration</name>
  <files>src/angular/angular.json</files>
  <action>
Modify `angular.json` to:

1. **Remove pre-compiled Bootstrap CSS** from the styles array in BOTH `build.options.styles` AND `test.options.styles`:
   - Remove: `"node_modules/bootstrap/dist/css/bootstrap.min.css"`
   - Keep: `"node_modules/font-awesome/scss/font-awesome.scss"` (before styles.scss)
   - Keep: `"src/styles.scss"`

2. **Add silenceDeprecations** configuration to BOTH `build.options` AND `test.options`:
```json
"stylePreprocessorOptions": {
  "sass": {
    "silenceDeprecations": [
      "import",
      "global-builtin",
      "color-functions",
      "mixed-decls"
    ]
  }
}
```

The silenceDeprecations array addresses:
- `import`: Bootstrap uses @import (not migrated to @use yet)
- `global-builtin`: Bootstrap uses global functions like adjust-color()
- `color-functions`: Bootstrap uses legacy color functions
- `mixed-decls`: Bootstrap mixes declarations and nested rules

CRITICAL: Update BOTH build and test configurations to prevent test failures.
  </action>
  <verify>
Run from src/angular directory:
```bash
# Verify bootstrap.min.css removed
grep -c "bootstrap.min.css" angular.json  # Should return 0

# Verify silenceDeprecations added to both build and test
grep -c "silenceDeprecations" angular.json  # Should return 2

# Verify font-awesome still present
grep -c "font-awesome" angular.json  # Should return 2
```
  </verify>
  <done>angular.json updated with pre-compiled CSS removed and silenceDeprecations configured for both build and test.</done>
</task>

</tasks>

<verification>
After all tasks complete, run these verification steps from `src/angular/`:

1. **Build verification:**
```bash
cd /path/to/seedsync/src/angular
npm run build
# Expected: Build succeeds with no errors
# Expected: No Sass deprecation warnings in output
```

2. **Test verification:**
```bash
cd /path/to/seedsync/src/angular
node_modules/@angular/cli/bin/ng test --no-watch --browsers=ChromeHeadless
# Expected: All tests pass
```

3. **File structure verification:**
```bash
ls -la src/app/common/_bootstrap*.scss
# Expected: Both _bootstrap-variables.scss and _bootstrap-overrides.scss exist
```

4. **Import order verification:**
```bash
head -50 src/styles.scss | grep -E "^@import"
# Expected: functions -> bootstrap-variables -> variables -> ... -> utilities/api -> bootstrap-overrides -> common
```
</verification>

<success_criteria>
Phase 1 is complete when:
1. `npm run build` succeeds without errors
2. `ng test --no-watch --browsers=ChromeHeadless` passes all tests
3. Build output shows NO Sass deprecation warnings
4. Bootstrap SCSS imports follow correct order in styles.scss
5. Both _bootstrap-variables.scss and _bootstrap-overrides.scss exist
6. angular.json no longer references bootstrap.min.css
7. angular.json has silenceDeprecations in both build and test configs
</success_criteria>

<output>
After completion, create `.planning/phases/01-bootstrap-scss-setup/01-01-SUMMARY.md`
</output>
