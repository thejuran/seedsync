---
phase: 10-lint-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/app/services/autoqueue/autoqueue.service.ts
  - src/angular/src/app/services/base/base-stream.service.ts
  - src/angular/src/app/services/base/base-web.service.ts
  - src/angular/src/app/services/base/stream-service.registry.ts
  - src/angular/src/app/services/files/file-selection.service.ts
  - src/angular/src/app/services/files/model-file.service.ts
  - src/angular/src/app/services/files/view-file-filter.service.ts
  - src/angular/src/app/services/files/view-file-options.service.ts
  - src/angular/src/app/services/files/view-file-sort.service.ts
  - src/angular/src/app/services/files/view-file.service.ts
  - src/angular/src/app/services/logs/log.service.ts
  - src/angular/src/app/services/server/server-command.service.ts
  - src/angular/src/app/services/server/server-status.service.ts
  - src/angular/src/app/services/settings/config.service.ts
  - src/angular/src/app/services/utils/confirm-modal.service.ts
  - src/angular/src/app/services/utils/connected.service.ts
  - src/angular/src/app/services/utils/dom.service.ts
  - src/angular/src/app/services/utils/logger.service.ts
  - src/angular/src/app/services/utils/notification.service.ts
  - src/angular/src/app/services/utils/version-check.service.ts
autonomous: true

must_haves:
  truths:
    - "All service methods have explicit return type annotations"
    - "Angular lifecycle methods in services return void explicitly"
    - "Observable-returning methods have explicit Observable<T> return types"
    - "Getters and setters have explicit types"
  artifacts:
    - path: "src/angular/src/app/services/base/stream-service.registry.ts"
      provides: "12 methods with explicit return types"
      min_lines: 200
    - path: "src/angular/src/app/services/autoqueue/autoqueue.service.ts"
      provides: "7 methods with explicit return types"
      contains: "): void"
  key_links: []
---

<objective>
Add explicit return type annotations to all service layer functions to satisfy the `@typescript-eslint/explicit-function-return-type` rule.

Purpose: Establish type safety in the services layer, which forms the foundation for the Angular application. Explicit return types catch bugs at compile time and improve IDE support.

Output: ~80 return type warnings resolved in 20 service files.
</objective>

<execution_context>
@/Users/julianamacbook/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianamacbook/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-lint-cleanup/10-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add return types to base services</name>
  <files>
src/angular/src/app/services/base/base-stream.service.ts
src/angular/src/app/services/base/base-web.service.ts
src/angular/src/app/services/base/stream-service.registry.ts
  </files>
  <action>
Add explicit return type annotations following these patterns:

**Lifecycle methods:**
```typescript
ngOnInit(): void { }
ngOnDestroy(): void { }
```

**Void methods:**
```typescript
start(): void { }
stop(): void { }
connect(): void { }
disconnect(): void { }
```

**Observable methods:**
```typescript
getItems(): Observable<Item[]> { }
```

**Private callbacks (arrow functions):**
```typescript
private onMessage = (event: MessageEvent): void => { }
```

**Getters:**
```typescript
get isConnected(): boolean { }
```

For stream-service.registry.ts specifically (~12 methods):
- Line 12: add `: void`
- Line 86: add `: void`
- Line 94: add `: void`
- Line 107: add `: void`
- Line 125: add `: void`
- Line 151: add `: void`
- Line 159: add `: void`
- Line 187: arrow function - add `: void`
- Line 201: arrow function - add `: void`
- Line 203: arrow function - add `: void`
- Line 260: add `: void`
- Line 279: add `: void`

For base-stream.service.ts (~4 methods):
- Lines 27, 31, 35, 39: add `: void` to each method

For base-web.service.ts (~1 method):
- Line 25: add appropriate return type (likely `Observable<T>` or `: void`)
  </action>
  <verify>
```bash
cd src/angular && npm run lint 2>&1 | grep -E "base-stream.service.ts|base-web.service.ts|stream-service.registry.ts" | grep "explicit-function-return-type"
# Should return empty (no matches)
```
  </verify>
  <done>All base service methods have explicit return types.</done>
</task>

<task type="auto">
  <name>Task 2: Add return types to domain services</name>
  <files>
src/angular/src/app/services/autoqueue/autoqueue.service.ts
src/angular/src/app/services/files/model-file.service.ts
src/angular/src/app/services/files/view-file-filter.service.ts
src/angular/src/app/services/files/view-file-options.service.ts
src/angular/src/app/services/files/view-file-sort.service.ts
src/angular/src/app/services/files/view-file.service.ts
src/angular/src/app/services/logs/log.service.ts
src/angular/src/app/services/server/server-command.service.ts
src/angular/src/app/services/server/server-status.service.ts
src/angular/src/app/services/settings/config.service.ts
  </files>
  <action>
Add explicit return type annotations to all methods in domain services:

**autoqueue.service.ts (~7 methods):**
- Lines 21, 22: getters - add `: Observable<...>` or appropriate type
- Lines 119, 124, 129, 133, 161: add `: void` or actual return type

**model-file.service.ts (~5 methods):**
- Add `: void` to lifecycle/handler methods
- Add `: Observable<T>` to observable-returning methods

**view-file-*.service.ts files:**
- Add appropriate return types based on what methods return

**log.service.ts (~4 methods):**
- Add `: void` or appropriate return types

**server-*.service.ts files:**
- Add `: Observable<T>` for HTTP methods
- Add `: void` for handlers

**config.service.ts (~8 methods):**
- Add appropriate return types (`:void`, `: Observable<T>`, `: ConfigRecord`, etc.)

Common patterns:
```typescript
// Event handlers
onFileSelected(file: ViewFile): void { }

// HTTP methods
save(): Observable<void> { }
load(): Observable<Config> { }

// Getters
get items(): ViewFile[] { }
```
  </action>
  <verify>
```bash
cd src/angular && npm run lint 2>&1 | grep -E "autoqueue.service.ts|model-file.service.ts|view-file|log.service.ts|server-|config.service.ts" | grep "explicit-function-return-type"
# Should return empty (no matches)
```
  </verify>
  <done>All domain service methods have explicit return types.</done>
</task>

<task type="auto">
  <name>Task 3: Add return types to utility services</name>
  <files>
src/angular/src/app/services/utils/confirm-modal.service.ts
src/angular/src/app/services/utils/connected.service.ts
src/angular/src/app/services/utils/dom.service.ts
src/angular/src/app/services/utils/logger.service.ts
src/angular/src/app/services/utils/notification.service.ts
src/angular/src/app/services/utils/version-check.service.ts
  </files>
  <action>
Add explicit return type annotations to utility service methods:

**confirm-modal.service.ts (~1 method):**
- Add `: Promise<boolean>` or `: Observable<boolean>` for confirm dialogs

**connected.service.ts (~3 methods):**
- Add `: void` for connection handlers

**dom.service.ts (~1 method):**
- Add appropriate return type

**logger.service.ts (~8 methods):**
- Note: Empty arrow functions addressed in Plan 01
- Add `: void` to logging methods (log, info, warn, error, etc.)

**notification.service.ts (~4 methods):**
- Add `: void` for notification methods

**version-check.service.ts (~3 methods):**
- Add `: Observable<T>` for version check
- Add `: void` for handlers
  </action>
  <verify>
```bash
cd src/angular && npm run lint 2>&1 | grep -E "services/utils/" | grep "explicit-function-return-type"
# Should return empty (no matches)
```
  </verify>
  <done>All utility service methods have explicit return types.</done>
</task>

</tasks>

<verification>
```bash
# Verify all service return types fixed
cd src/angular && npm run lint 2>&1 | grep "/services/" | grep "explicit-function-return-type"
# Expected: No output (all fixed)

# Count remaining return type issues (should be ~72 = 152 - 80)
cd src/angular && npm run lint 2>&1 | grep -c "explicit-function-return-type"
# Expected: Around 72 (pages/common/tests remaining)

# Run unit tests
cd src/angular && npm test -- --watch=false
# Expected: All tests pass
```
</verification>

<success_criteria>
1. Zero `explicit-function-return-type` warnings in any `/services/` file
2. All 387 unit tests still pass
3. Total return type warnings reduced from ~152 to ~72
</success_criteria>

<output>
After completion, create `.planning/phases/10-lint-cleanup/10-02-SUMMARY.md`
</output>
