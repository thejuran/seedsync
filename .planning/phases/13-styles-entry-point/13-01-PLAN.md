---
phase: 13-styles-entry-point
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/styles.scss
autonomous: true

must_haves:
  truths:
    - "styles.scss uses @use for app/common/bootstrap-overrides (not @import)"
    - "styles.scss uses @use for app/common/common (not @import)"
    - "All Bootstrap imports remain as @import (unchanged)"
    - "Bootstrap import order is preserved (functions -> overrides -> variables -> maps -> mixins -> root -> components -> utilities/api)"
    - "@use rules appear before global CSS style rules (html, body, etc.)"
    - "Section comments document the hybrid approach (Bootstrap @import + app @use)"
    - "ng build compiles with zero errors"
    - "Zero deprecation warnings reference src/app/ paths"
    - "All 381 Angular unit tests pass"
    - "Global CSS rules (html, body, input, div) are unchanged"
  artifacts:
    - path: "src/angular/src/styles.scss"
      provides: "Hybrid entry point: @import for Bootstrap, @use for application modules"
      contains: "@use 'app/common/bootstrap-overrides'"
  key_links:
    - from: "styles.scss"
      to: "app/common/bootstrap-overrides"
      via: "@use directive (modern, non-deprecated)"
      pattern: "@use 'app/common/bootstrap-overrides'"
    - from: "styles.scss"
      to: "app/common/common"
      via: "@use directive (modern, non-deprecated)"
      pattern: "@use 'app/common/common'"
    - from: "styles.scss"
      to: "node_modules/bootstrap/scss/*"
      via: "@import directives (required by Bootstrap 5.3)"
      pattern: "@import '../node_modules/bootstrap/scss/"
---

<objective>
Update `styles.scss` to use `@use` for application modules while keeping `@import` for Bootstrap, and add section comments documenting the hybrid approach.

Purpose: Eliminate application SCSS deprecation warnings by migrating the 2 remaining application `@import` rules to `@use`, completing the v1.4 Sass module migration. Document the hybrid pattern for future maintainers.
Output: `styles.scss` with hybrid architecture -- Bootstrap loaded via `@import` (required by Bootstrap 5.3), application modules loaded via `@use` (modern, zero deprecation warnings).
</objective>

<execution_context>
@/Users/julianamacbook/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianamacbook/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/REQUIREMENTS.md
@.planning/milestones/v1.4-ROADMAP.md
@.planning/phases/13-styles-entry-point/13-RESEARCH.md
@.planning/phases/12-shared-module-migration/12-01-SUMMARY.md
@src/angular/src/styles.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate styles.scss application imports to @use and add section comments</name>
  <files>src/angular/src/styles.scss</files>
  <action>
Modify `styles.scss` to replace the 2 application `@import` rules with `@use` and add section comments documenting the hybrid approach. The file has 84 lines. Here are the exact changes:

1. REPLACE lines 1-2 (the opening comment) with a section header for Bootstrap core:

```scss
// =============================================================================
// SECTION 1: Bootstrap Core (@import -- required by Bootstrap 5.3)
// Bootstrap 5.3 uses @import internally and is not compatible with @use.
// Deprecation warnings from Bootstrap are accepted as external dependency noise.
// This hybrid approach will be revisited when Bootstrap 6 adds @use support.
// =============================================================================

// 1. Bootstrap functions (required for variable calculations)
```

2. REPLACE the comment on line 16 with a section header for Bootstrap components:

FROM:
```scss
// 4. All Bootstrap components (import ALL to ensure no visual changes)
```

TO:
```scss
// =============================================================================
// SECTION 2: Bootstrap Components (@import -- required by Bootstrap 5.3)
// =============================================================================
```

3. REPLACE lines 53-57 (the bootstrap-overrides and common imports with their comments) with a section header for application modules using @use:

FROM:
```scss
// 6. Bootstrap post-compilation overrides
@import 'app/common/bootstrap-overrides';

// 7. Custom application styles
@import 'app/common/common';
```

TO:
```scss
// =============================================================================
// SECTION 3: Application Modules (@use -- modern Sass module system)
// These modules were migrated from @import to @use/@forward in Phase 12-13.
// Using @use eliminates application deprecation warnings.
// =============================================================================
@use 'app/common/bootstrap-overrides';
@use 'app/common/common';
```

4. ADD a section header before the global CSS rules (before the `html {` line):

```scss
// =============================================================================
// SECTION 4: Global CSS Rules
// =============================================================================
```

5. LEAVE UNCHANGED:
   - All Bootstrap @import lines (lines 4, 7, 10-14, 17-48, 51) -- these MUST stay as @import
   - The bootstrap-variables import on line 7 (`@import 'app/common/bootstrap-variables'`) -- this is part of the Bootstrap loading sequence, NOT an application module import
   - All global CSS rules (html, body, input, div blocks) -- content unchanged
   - Bootstrap import ORDER -- must remain: functions -> bootstrap-variables -> variables -> variables-dark -> maps -> mixins -> root -> components -> utilities/api

CRITICAL: Do NOT change `@import 'app/common/bootstrap-variables'` (line 7) to @use. This file is loaded as part of the Bootstrap variable override sequence and must be @import to inject variables into the global scope before Bootstrap's `!default` variables are evaluated. The research explicitly confirms this: "Bootstrap variables import on line 7 STAYS as @import (it's part of Bootstrap loading sequence)".

CRITICAL: The 2 @use rules MUST appear AFTER all @import rules and BEFORE the global CSS style rules (html, body blocks). Sass requires @use to come before any style rules.

The complete target file should be:

```scss
// =============================================================================
// SECTION 1: Bootstrap Core (@import -- required by Bootstrap 5.3)
// Bootstrap 5.3 uses @import internally and is not compatible with @use.
// Deprecation warnings from Bootstrap are accepted as external dependency noise.
// This hybrid approach will be revisited when Bootstrap 6 adds @use support.
// =============================================================================

// 1. Bootstrap functions (required for variable calculations)
@import '../node_modules/bootstrap/scss/functions';

// 2. Bootstrap variable overrides (our customizations)
@import 'app/common/bootstrap-variables';

// 3. Bootstrap core variables and maps
@import '../node_modules/bootstrap/scss/variables';
@import '../node_modules/bootstrap/scss/variables-dark';
@import '../node_modules/bootstrap/scss/maps';
@import '../node_modules/bootstrap/scss/mixins';
@import '../node_modules/bootstrap/scss/root';

// =============================================================================
// SECTION 2: Bootstrap Components (@import -- required by Bootstrap 5.3)
// =============================================================================
@import '../node_modules/bootstrap/scss/utilities';
@import '../node_modules/bootstrap/scss/reboot';
@import '../node_modules/bootstrap/scss/type';
@import '../node_modules/bootstrap/scss/images';
@import '../node_modules/bootstrap/scss/containers';
@import '../node_modules/bootstrap/scss/grid';
@import '../node_modules/bootstrap/scss/tables';
@import '../node_modules/bootstrap/scss/forms';
@import '../node_modules/bootstrap/scss/buttons';
@import '../node_modules/bootstrap/scss/transitions';
@import '../node_modules/bootstrap/scss/dropdown';
@import '../node_modules/bootstrap/scss/button-group';
@import '../node_modules/bootstrap/scss/nav';
@import '../node_modules/bootstrap/scss/navbar';
@import '../node_modules/bootstrap/scss/card';
@import '../node_modules/bootstrap/scss/accordion';
@import '../node_modules/bootstrap/scss/breadcrumb';
@import '../node_modules/bootstrap/scss/pagination';
@import '../node_modules/bootstrap/scss/badge';
@import '../node_modules/bootstrap/scss/alert';
@import '../node_modules/bootstrap/scss/progress';
@import '../node_modules/bootstrap/scss/list-group';
@import '../node_modules/bootstrap/scss/close';
@import '../node_modules/bootstrap/scss/toasts';
@import '../node_modules/bootstrap/scss/modal';
@import '../node_modules/bootstrap/scss/tooltip';
@import '../node_modules/bootstrap/scss/popover';
@import '../node_modules/bootstrap/scss/carousel';
@import '../node_modules/bootstrap/scss/spinners';
@import '../node_modules/bootstrap/scss/offcanvas';
@import '../node_modules/bootstrap/scss/placeholders';
@import '../node_modules/bootstrap/scss/helpers';

// 5. Bootstrap utilities API
@import '../node_modules/bootstrap/scss/utilities/api';

// =============================================================================
// SECTION 3: Application Modules (@use -- modern Sass module system)
// These modules were migrated from @import to @use/@forward in Phase 12-13.
// Using @use eliminates application deprecation warnings.
// =============================================================================
@use 'app/common/bootstrap-overrides';
@use 'app/common/common';

// =============================================================================
// SECTION 4: Global CSS Rules
// =============================================================================

html {
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
}

html, body {
    font-family: Verdana,sans-serif;
    font-size: 15px;
    line-height: 1.5;
    margin: 0;
    // Safari 26+ toolbar color fix - ensures consistent color in the 8px top strip
    background-color: #f5f5f5;
}

/* show the input search cancel button */
input[type=search]::-webkit-search-cancel-button {
    -webkit-appearance: searchfield-cancel-button;
}

div {
    /*border: 1px solid black;*/
    /* make padding and border inside box */
    box-sizing: border-box;
}
```
  </action>
  <verify>
Run build and deprecation warning audit:

1. Build: `cd /Users/julianamacbook/seedsync/src/angular && npx ng build --configuration development 2>&1 | tail -20`
   - Expected: Build succeeds with zero errors

2. Application deprecation check: `cd /Users/julianamacbook/seedsync/src/angular && npx ng build --configuration development 2>&1 | grep -i "deprecat" | grep "src/app" | head -20`
   - Expected: No output (zero application deprecation warnings)
   - Bootstrap deprecation warnings are acceptable

3. Verify @use syntax in file: `grep "@use" /Users/julianamacbook/seedsync/src/angular/src/styles.scss`
   - Expected: Exactly 2 lines: `@use 'app/common/bootstrap-overrides'` and `@use 'app/common/common'`

4. Verify @import not used for app modules: `grep "@import.*app/common/bootstrap-overrides\|@import.*app/common/common" /Users/julianamacbook/seedsync/src/angular/src/styles.scss`
   - Expected: No output (these should be @use now, not @import)

5. Verify bootstrap-variables stays as @import: `grep "@import.*bootstrap-variables" /Users/julianamacbook/seedsync/src/angular/src/styles.scss`
   - Expected: `@import 'app/common/bootstrap-variables';` (still @import, part of Bootstrap sequence)
  </verify>
  <done>
styles.scss uses @use for bootstrap-overrides and common (not @import). Bootstrap imports unchanged. Section comments document hybrid approach. Build succeeds with zero errors. Zero application deprecation warnings.
  </done>
</task>

<task type="auto">
  <name>Task 2: Run full test suite and verify zero regressions</name>
  <files></files>
  <action>
Run the full verification suite to confirm zero regressions:

1. Run Angular unit tests:
   ```bash
   cd /Users/julianamacbook/seedsync/src/angular && npx ng test --watch=false --browsers=ChromeHeadless
   ```
   Expected: All 381 tests pass.

2. Verify only styles.scss was modified:
   ```bash
   cd /Users/julianamacbook/seedsync && git diff --name-only
   ```
   Expected: Only `src/angular/src/styles.scss` appears.

3. Verify the hybrid documentation is present in the file:
   ```bash
   grep -c "SECTION" /Users/julianamacbook/seedsync/src/angular/src/styles.scss
   ```
   Expected: 4 (one for each section header).

If tests fail, check:
- Build errors mentioning "@use rules must be written before any other rules" means a @use appears after a style rule
- "Undefined variable" errors mean a module dependency broke
- Neither should occur given the straightforward @import -> @use swap
  </action>
  <verify>
All 381 unit tests pass.
Only 1 file modified: styles.scss.
4 section headers present documenting hybrid approach (REQ-08).
  </verify>
  <done>
All 381 unit tests pass. Only styles.scss modified. Hybrid approach documented with section comments. REQ-03 (styles.scss uses @use for app modules), REQ-04 (zero app deprecation warnings), and REQ-08 (hybrid approach documented) satisfied.
  </done>
</task>

</tasks>

<verification>
1. `ng build --configuration development` completes with zero compilation errors
2. `styles.scss` line 54 area uses `@use 'app/common/bootstrap-overrides'` (not @import)
3. `styles.scss` line 57 area uses `@use 'app/common/common'` (not @import)
4. `styles.scss` line 7 still uses `@import 'app/common/bootstrap-variables'` (part of Bootstrap sequence)
5. All Bootstrap imports remain as @import (lines 4, 10-14, 17-48, 51)
6. @use rules appear before global CSS style rules
7. Zero deprecation warnings reference `src/app/` paths
8. All 381 unit tests pass
9. Only 1 file modified: `styles.scss`
10. 4 section comment blocks document the hybrid approach
</verification>

<success_criteria>
- REQ-03: styles.scss uses @use for application modules (bootstrap-overrides, common) - SATISFIED
- REQ-04: Zero deprecation warnings from application SCSS code - SATISFIED
- REQ-05: All 381 Angular unit tests pass - SATISFIED
- REQ-08: Hybrid approach documented with section comments - SATISFIED
</success_criteria>

<output>
After completion, create `.planning/phases/13-styles-entry-point/13-01-SUMMARY.md`
</output>
