---
phase: 32-cosmetic-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/app/pages/files/file-list.component.ts
  - src/angular/src/app/pages/settings/options-list.ts
  - src/python/model/file.py
  - src/python/web/serialize/serialize_model.py
  - src/angular/src/app/services/files/model-file.ts
  - src/angular/src/app/services/files/view-file.ts
  - src/angular/src/app/services/files/view-file.service.ts
autonomous: true

must_haves:
  truths:
    - "Toast notification says 'Sonarr/Radarr imported:' when a file import is detected"
    - "Auto-delete description in Settings says 'after Sonarr/Radarr import'"
    - "WAITING_FOR_IMPORT enum value exists in backend and frontend with full serialization pipeline"
  artifacts:
    - path: "src/angular/src/app/pages/files/file-list.component.ts"
      provides: "Updated toast message text"
      contains: "Sonarr/Radarr imported:"
    - path: "src/angular/src/app/pages/settings/options-list.ts"
      provides: "Updated auto-delete description"
      contains: "after Sonarr/Radarr import"
    - path: "src/python/model/file.py"
      provides: "WAITING_FOR_IMPORT enum value in backend"
      contains: "WAITING_FOR_IMPORT"
    - path: "src/python/web/serialize/serialize_model.py"
      provides: "WAITING_FOR_IMPORT serialization mapping"
      contains: "waiting_for_import"
    - path: "src/angular/src/app/services/files/model-file.ts"
      provides: "WAITING_FOR_IMPORT in ModelFile.ImportStatus enum"
      contains: "WAITING_FOR_IMPORT"
    - path: "src/angular/src/app/services/files/view-file.ts"
      provides: "WAITING_FOR_IMPORT in ViewFile.ImportStatus enum"
      contains: "WAITING_FOR_IMPORT"
    - path: "src/angular/src/app/services/files/view-file.service.ts"
      provides: "WAITING_FOR_IMPORT case in mapImportStatus switch"
      contains: "WAITING_FOR_IMPORT"
  key_links:
    - from: "src/python/model/file.py"
      to: "src/python/web/serialize/serialize_model.py"
      via: "enum-to-string mapping in __VALUES_FILE_IMPORT_STATUS dict"
      pattern: "WAITING_FOR_IMPORT.*waiting_for_import"
    - from: "src/python/web/serialize/serialize_model.py"
      to: "src/angular/src/app/services/files/model-file.ts"
      via: "JSON API response parsed by ModelFile.fromJson"
      pattern: "waiting_for_import"
    - from: "src/angular/src/app/services/files/model-file.ts"
      to: "src/angular/src/app/services/files/view-file.service.ts"
      via: "mapImportStatus switch statement"
      pattern: "ModelFile\\.ImportStatus\\.WAITING_FOR_IMPORT"
---

<objective>
Update all *arr integration text to reference both Sonarr and Radarr, and add WAITING_FOR_IMPORT enum value to the import status pipeline.

Purpose: Phase 26-28 added dual Sonarr/Radarr support but some UI text still only references Sonarr. The WAITING_FOR_IMPORT enum value was deferred from Phase 24 and is now added as a structural placeholder for future use.

Output: Updated toast messages, settings descriptions, and a complete WAITING_FOR_IMPORT enum value across backend and frontend.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-cosmetic-fixes/32-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update *arr text references to Sonarr/Radarr</name>
  <files>
    src/angular/src/app/pages/files/file-list.component.ts
    src/angular/src/app/pages/settings/options-list.ts
  </files>
  <action>
    Update two hardcoded "Sonarr" text references to "Sonarr/Radarr":

    1. **Toast notification** in `src/angular/src/app/pages/files/file-list.component.ts` line 139:
       - Change: `this._toastService.success("Sonarr imported: " + file.name);`
       - To: `this._toastService.success("Sonarr/Radarr imported: " + file.name);`

    2. **Auto-delete description** in `src/angular/src/app/pages/settings/options-list.ts` line 195:
       - Change: `description: "Automatically delete local files after Sonarr import"`
       - To: `description: "Automatically delete local files after Sonarr/Radarr import"`

    These are simple string replacements. Do NOT make toast messages conditional on import source -- the system is source-agnostic by design (WebhookManager handles both Sonarr and Radarr identically).
  </action>
  <verify>
    Grep for "Sonarr imported:" in `src/angular/src/app/pages/files/file-list.component.ts` -- should return zero results.
    Grep for "Sonarr/Radarr imported:" -- should return exactly one result.
    Grep for "after Sonarr import" in `src/angular/src/app/pages/settings/options-list.ts` -- should return zero results.
    Grep for "after Sonarr/Radarr import" -- should return exactly one result.
  </verify>
  <done>
    Toast says "Sonarr/Radarr imported: {filename}" when import detected. Auto-delete description says "Automatically delete local files after Sonarr/Radarr import".
  </done>
</task>

<task type="auto">
  <name>Task 2: Add WAITING_FOR_IMPORT enum value across full pipeline</name>
  <files>
    src/python/model/file.py
    src/python/web/serialize/serialize_model.py
    src/angular/src/app/services/files/model-file.ts
    src/angular/src/app/services/files/view-file.ts
    src/angular/src/app/services/files/view-file.service.ts
  </files>
  <action>
    Add WAITING_FOR_IMPORT enum value to all 5 locations in the serialization pipeline. This is structural only -- no code should SET this value yet (future use).

    1. **Backend enum** in `src/python/model/file.py` around line 33-35:
       - Add `WAITING_FOR_IMPORT = 2` after `IMPORTED = 1`
       - Update comments: NONE comment to "Not tracked by *arr / no import detected", IMPORTED comment to "Imported by Sonarr/Radarr", WAITING_FOR_IMPORT comment to "Detected by *arr, awaiting import"

    2. **Backend serialization** in `src/python/web/serialize/serialize_model.py` around line 63-66:
       - Add `ModelFile.ImportStatus.WAITING_FOR_IMPORT: "waiting_for_import"` to the `__VALUES_FILE_IMPORT_STATUS` dict

    3. **Frontend ModelFile enum** in `src/angular/src/app/services/files/model-file.ts` (inside `export enum ImportStatus` block, around line 156-158):
       - Add `WAITING_FOR_IMPORT = "waiting_for_import"` after IMPORTED

    4. **Frontend ViewFile enum** in `src/angular/src/app/services/files/view-file.ts` (inside `export enum ImportStatus` block, around line 103-106):
       - Add `WAITING_FOR_IMPORT = "waiting_for_import"` after IMPORTED

    5. **Frontend mapping** in `src/angular/src/app/services/files/view-file.service.ts` in the `mapImportStatus` method (around line 452-458):
       - Add case: `case ModelFile.ImportStatus.WAITING_FOR_IMPORT: return ViewFile.ImportStatus.WAITING_FOR_IMPORT;`
       - Place it before the `default` case

    Important: Do NOT add any business logic that sets WAITING_FOR_IMPORT. Do NOT modify any other serialization structures. The `default` fallback in `mapImportStatus` must remain (returns NONE for unknown values).

    Run `cd /Users/julianamacbook/seedsync/src/python && poetry run pytest` to verify no Python test breakage.
    Run `cd /Users/julianamacbook/seedsync/src/angular && node_modules/@angular/cli/bin/ng test --watch=false` to verify no Angular test breakage.
  </action>
  <verify>
    1. Grep for "WAITING_FOR_IMPORT" in `src/python/model/file.py` returns 1 result
    2. Grep for "waiting_for_import" in `src/python/web/serialize/serialize_model.py` returns 1 result
    3. Grep for "WAITING_FOR_IMPORT" in `src/angular/src/app/services/files/model-file.ts` returns 1 result
    4. Grep for "WAITING_FOR_IMPORT" in `src/angular/src/app/services/files/view-file.ts` returns 1 result
    5. Grep for "WAITING_FOR_IMPORT" in `src/angular/src/app/services/files/view-file.service.ts` returns 1 result
    6. Python tests pass: `cd src/python && poetry run pytest`
    7. Angular tests pass: `cd src/angular && node_modules/@angular/cli/bin/ng test --watch=false`
  </verify>
  <done>
    WAITING_FOR_IMPORT enum value exists in all 5 pipeline locations (backend enum, backend serialization, frontend ModelFile enum, frontend ViewFile enum, frontend mapping). All existing tests pass. No business logic sets the new value.
  </done>
</task>

</tasks>

<verification>
1. No remaining "Sonarr imported:" text (should be "Sonarr/Radarr imported:")
2. No remaining "after Sonarr import" text (should be "after Sonarr/Radarr import")
3. WAITING_FOR_IMPORT appears in exactly 5 files across the pipeline
4. Backend enum has 3 values: NONE=0, IMPORTED=1, WAITING_FOR_IMPORT=2
5. Serialization dict has 3 entries mapping all 3 enum values to strings
6. Frontend ModelFile.ImportStatus has 3 values: NONE, IMPORTED, WAITING_FOR_IMPORT
7. Frontend ViewFile.ImportStatus has 3 values: NONE, IMPORTED, WAITING_FOR_IMPORT
8. mapImportStatus handles all 3 values plus default fallback to NONE
9. All Python and Angular unit tests pass
</verification>

<success_criteria>
- Toast notifications display "Sonarr/Radarr imported: {filename}" (COSM-01)
- Auto-delete description reads "Automatically delete local files after Sonarr/Radarr import" (COSM-02)
- WAITING_FOR_IMPORT enum value exists end-to-end: backend enum -> serialization -> frontend enum -> view mapping (COSM-03)
- All existing tests pass without modification
</success_criteria>

<output>
After completion, create `.planning/phases/32-cosmetic-fixes/32-01-SUMMARY.md`
</output>
