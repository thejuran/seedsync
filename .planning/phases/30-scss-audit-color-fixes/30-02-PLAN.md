---
phase: 30-scss-audit-color-fixes
plan: 02
type: execute
wave: 2
depends_on: ["30-01"]
files_modified:
  - src/angular/src/app/pages/main/app.component.scss
  - src/angular/src/app/pages/files/file-list.component.scss
  - src/angular/src/app/pages/files/file.component.scss
  - src/angular/src/app/pages/logs/logs-page.component.scss
  - src/angular/src/app/pages/about/about-page.component.scss
  - src/angular/src/app/pages/main/sidebar.component.scss
  - src/angular/src/app/pages/main/header.component.scss
autonomous: true

must_haves:
  truths:
    - "All hardcoded hex colors in component SCSS are replaced with theme-aware CSS variables"
    - "All pages (Files, Settings, About, Logs) are readable in both light and dark themes"
    - "Teal accent colors have appropriate contrast in both themes"
  artifacts:
    - path: "src/angular/src/app/pages/main/app.component.scss"
      provides: "Theme-aware app layout colors"
    - path: "src/angular/src/app/pages/files/file-list.component.scss"
      provides: "Theme-aware file list header and overlay"
    - path: "src/angular/src/app/pages/files/file.component.scss"
      provides: "Theme-aware file row borders and even-row striping"
    - path: "src/angular/src/app/pages/logs/logs-page.component.scss"
      provides: "Theme-aware log level colors"
    - path: "src/angular/src/app/pages/about/about-page.component.scss"
      provides: "Theme-aware about page muted text"
    - path: "src/angular/src/app/pages/main/sidebar.component.scss"
      provides: "Theme-aware sidebar teal border"
    - path: "src/angular/src/app/pages/main/header.component.scss"
      provides: "Theme-aware header close button"
  key_links:
    - from: "src/angular/src/app/pages/main/app.component.scss"
      to: "src/angular/src/styles.scss"
      via: "CSS custom properties (--app-header-bg, --app-top-header-bg)"
      pattern: "var\\(--app-"
    - from: "src/angular/src/app/pages/files/file-list.component.scss"
      to: "src/angular/src/styles.scss"
      via: "CSS custom properties (--app-file-header-bg, --app-bulk-overlay-bg)"
      pattern: "var\\(--app-"
    - from: "src/angular/src/app/pages/files/file.component.scss"
      to: "src/angular/src/styles.scss"
      via: "CSS custom properties (--app-file-border-color, --app-file-row-even)"
      pattern: "var\\(--app-"
---

<objective>
Migrate all hardcoded colors in component SCSS files to theme-aware CSS variables, completing the SCSS audit for Phase 30.

Purpose: Every component renders correctly in both light and dark themes. No hardcoded hex colors remain that would cause visibility or contrast issues when switching themes.

Output: Seven component SCSS files updated to use `var(--app-*)` and `var(--bs-*)` CSS variables instead of hardcoded color values.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-scss-audit-color-fixes/30-RESEARCH.md
@.planning/phases/30-scss-audit-color-fixes/30-01-SUMMARY.md
@src/angular/src/app/common/_bootstrap-variables.scss
@src/angular/src/app/common/_common.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate high-priority component SCSS files</name>
  <files>
    src/angular/src/app/pages/main/app.component.scss
    src/angular/src/app/pages/files/file-list.component.scss
    src/angular/src/app/pages/logs/logs-page.component.scss
  </files>
  <action>
**app.component.scss** -- Replace these hardcoded colors:

1. Line 14: `background-color: #f5f5f5;` -> `background-color: var(--app-top-header-bg);`
   (Safari toolbar tinting -- the comment on line 13 about Safari is still relevant)

2. Line 25: `background-color: black;` -> `background-color: var(--app-sidebar-overlay-bg);`
   Also remove `opacity: .25;` on line 26 since the opacity is now baked into the rgba value of the CSS variable. The `#outside-sidebar` block should become:
   ```scss
   #outside-sidebar {
       position: fixed;
       top: 0;
       left: 0;
       width: 100%;
       height: 100%;
       z-index: $zindex-sidebar - 1;
       background-color: var(--app-sidebar-overlay-bg);
   }
   ```

3. Line 30: `background-color: $header-color;` -> `background-color: var(--app-header-bg);`

4. Line 47: `background-color: $primary-light-color;` -- Keep this as-is. The sidebar background uses a SCSS variable that is a light blue (#D7E7F4). For dark mode, add a scoped override:
   ```scss
   [data-bs-theme="dark"] #top-sidebar {
       background-color: #1e2125;
   }
   ```
   Add this after the `#top-sidebar` block (after line 92, before the @keyframes).

5. Line 87: `color: red;` on `#sidebar-btn-close:active` -> `color: var(--bs-danger);`
   (Semantic color for destructive close action)

6. Line 134: `background-color: $header-dark-color;` on `#sidebar-btn-open:active` -> `background-color: var(--bs-secondary-bg);`
   (Bootstrap semantic variable for subtle background)

**file-list.component.scss** -- Replace these hardcoded colors:

1. Line 17: `background: rgba(white, 0.8);` -> `background: var(--app-bulk-overlay-bg);`

2. Line 27: `color: $gray-800;` -> `color: var(--bs-body-color);`
   (Progress text should use standard body text color)

3. Lines 91-92: `color: white;` and `background-color: black;` on `#header div` ->
   `color: var(--app-file-header-color);` and `background-color: var(--app-file-header-bg);`

**logs-page.component.scss** -- Replace these hardcoded colors:

1. Line 49: `color: darkgray;` on `.debug` -> `color: var(--bs-secondary-color);`
   (Bootstrap semantic muted text color, adapts to both themes)

2. Line 53: `color: black;` on `.info` -> `color: var(--bs-body-color);`
   (Standard body text color, adapts to both themes)

The `.warning` and `.error` blocks (lines 56-66) already use SCSS variables that compute from Bootstrap colors. These are compile-time values and won't adapt to dark mode. Replace them with Bootstrap CSS variables:

3. Lines 57-59 (.warning):
   ```scss
   &.warning {
       color: var(--bs-warning-text-emphasis);
       background-color: var(--bs-warning-bg-subtle);
       border-color: var(--bs-warning-border-subtle);
   }
   ```

4. Lines 63-65 (.error, .critical):
   ```scss
   &.error, &.critical {
       color: var(--bs-danger-text-emphasis);
       background-color: var(--bs-danger-bg-subtle);
       border-color: var(--bs-danger-border-subtle);
   }
   ```

These Bootstrap CSS variables (--bs-warning-text-emphasis, etc.) are defined by Bootstrap 5.3 in both light and dark contexts and will adapt automatically. The SCSS variables ($warning-text-emphasis etc. from _common.scss) are compile-time only and don't adapt.

5. Line 84: `border-bottom: 1px solid $gray-300;` -> `border-bottom: 1px solid var(--bs-border-color);`

6. Line 88: `background-color: $gray-100;` -> `background-color: var(--bs-tertiary-bg);`
   (Bootstrap semantic background for subtle containers)
  </action>
  <verify>
Run `cd /Users/julianamacbook/seedsync/src/angular && npx ng build --configuration development` and confirm zero errors. Run `npm run lint` and confirm zero errors.
  </verify>
  <done>
app.component.scss uses --app-top-header-bg, --app-sidebar-overlay-bg, --app-header-bg, --bs-danger, --bs-secondary-bg, and has a dark mode sidebar override. file-list.component.scss uses --app-bulk-overlay-bg, --bs-body-color, --app-file-header-color/bg. logs-page.component.scss uses --bs-secondary-color, --bs-body-color, and Bootstrap CSS semantic variables for warning/error colors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate remaining component SCSS files</name>
  <files>
    src/angular/src/app/pages/about/about-page.component.scss
    src/angular/src/app/pages/files/file.component.scss
    src/angular/src/app/pages/main/sidebar.component.scss
    src/angular/src/app/pages/main/header.component.scss
  </files>
  <action>
**about-page.component.scss** -- Replace these hardcoded colors:

1. Line 23: `color: $logo-color;` -> `color: var(--app-logo-color);`
   (Logo text in banner section)

2. Line 60: `color: $logo-color;` -> `color: var(--app-logo-color);`
   (Bullet point color in features/platforms lists)

3. Line 75: `color: #999;` on `.separator` -> `color: var(--app-separator-color);`

4. Line 90: `color: #666;` on `#fork-note` -> `color: var(--app-muted-text);`

5. Line 95: `color: #999;` on `#icons` -> `color: var(--app-separator-color);`
   (Same shade as separators -- decorative muted text)

**file.component.scss** -- Replace these hardcoded colors:

1. Line 11: `border-bottom: 1px solid #ddd;` -> `border-bottom: 1px solid var(--app-file-border-color);`

2. Line 24: `background-color: $primary-lighter-color;` -> `background-color: var(--app-file-row-even);`
   (Even-row striping for the virtual scroll file list)

**sidebar.component.scss** -- Replace these hardcoded colors:

1. Line 27: `border-color: #6ac19e;` -> `border-color: var(--app-accent-teal-border);`
   (Selected sidebar item border)

2. Line 50: `border: 1px solid $header-dark-color;` on `hr` -> `border: 1px solid var(--bs-border-color);`
   (Sidebar divider should use standard border color)

**header.component.scss** -- Replace these hardcoded colors:

1. Line 20: `color: red;` on `button.close:active` -> `color: var(--bs-danger);`
   (Semantic destructive color for close button press)

**After all changes**, verify no SCSS files import `$logo-color` for color usage that should now be a CSS variable. The `$logo-color` SCSS variable in _bootstrap-variables.scss is still used by `app.component.scss` for the sidebar logo text (line 77) -- this also needs to change:

In `app.component.scss` line 77: `color: $logo-color;` -> `color: var(--app-logo-color);`

Similarly, check `app.component.scss` line 77 for the sidebar `.text` color.

**Final scan**: After all file edits, do a grep for any remaining hardcoded hex colors (#xxx, #xxxxxx) in the modified component SCSS files. Any remaining ones should either be:
- Intentional (box-shadow rgba values, z-index comments)
- Already handled by SCSS variables that compile at build time (like $secondary-color which Bootstrap handles)

Do NOT change SCSS variables like `$secondary-color`, `$primary-color`, `$secondary-dark-color`, etc. These are used for selection highlighting and button states which Bootstrap compiles at build time. They work because Bootstrap generates both light and dark variants from these base values.
  </action>
  <verify>
Run `cd /Users/julianamacbook/seedsync/src/angular && npx ng build --configuration development` and confirm zero errors. Run `npm run lint` and confirm zero errors. Run `npx ng test --watch=false --browsers=ChromeHeadless` and confirm all 412+ tests pass. Run a grep for remaining hardcoded colors: `grep -rn '#[0-9a-fA-F]\{3,6\}' src/angular/src/app/pages/ --include="*.scss" | grep -v '//'` -- review any remaining matches are intentional (SCSS variable definitions, not runtime colors).
  </verify>
  <done>
All seven component SCSS files use CSS variables instead of hardcoded colors. about-page uses --app-logo-color, --app-muted-text, --app-separator-color. file.component uses --app-file-border-color, --app-file-row-even. sidebar uses --app-accent-teal-border, --bs-border-color. header uses --bs-danger. app.component sidebar logo uses --app-logo-color. Angular build, lint, and all tests pass.
  </done>
</task>

</tasks>

<verification>
1. `cd src/angular && npx ng build --configuration development` completes with zero errors
2. `cd src/angular && npm run lint` reports zero errors
3. `cd src/angular && npx ng test --watch=false --browsers=ChromeHeadless` all 412+ tests pass
4. Grep audit: no hardcoded hex colors remain in component SCSS files (except SCSS variable definitions and box-shadow/rgba values)
5. All --app-* variable references in component files correspond to definitions in styles.scss
6. Warning/error log colors use Bootstrap CSS variables (not SCSS variables) for runtime theme adaptation
</verification>

<success_criteria>
- Zero hardcoded hex colors in component SCSS for text, background, and border colors (STYLE-01)
- Even-row striping, file borders, overlay, and header adapt to theme (STYLE-01)
- Log level colors (debug, info, warning, error) readable in both themes (STYLE-01)
- Logo color, muted text, separators adapt to dark mode (STYLE-01)
- Teal accent border on sidebar adapts via --app-accent-teal-border (STYLE-03)
- Semantic colors (close button, danger) use --bs-danger (STYLE-03)
- Angular build succeeds, lint passes, all tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/30-scss-audit-color-fixes/30-02-SUMMARY.md`
</output>
