---
phase: 02-color-variable-consolidation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/angular/src/app/common/_bootstrap-variables.scss
  - src/angular/src/app/common/_common.scss
autonomous: true

must_haves:
  truths:
    - "Bootstrap theme colors ($primary, $secondary, $danger, $success, $warning) are defined"
    - "Custom application variables derive from Bootstrap theme colors"
    - "%button placeholder uses Bootstrap variables instead of hardcoded hex"
  artifacts:
    - path: "src/angular/src/app/common/_bootstrap-variables.scss"
      provides: "Bootstrap theme color overrides and application variables"
      contains: "$danger"
    - path: "src/angular/src/app/common/_common.scss"
      provides: "Button placeholder using Bootstrap variables"
      contains: "shade-color"
  key_links:
    - from: "_common.scss"
      to: "_bootstrap-variables.scss"
      via: "@use with Bootstrap variables"
      pattern: "\\$primary|\\$danger|shade-color"
---

<objective>
Define Bootstrap theme color overrides and update _common.scss to use Bootstrap variables instead of hardcoded hex colors.

Purpose: Establish single source of truth for semantic colors (danger, success, warning) using Bootstrap's theme system, enabling component files to reference these variables.

Output: _bootstrap-variables.scss with theme colors defined, _common.scss updated to use shade-color() for active states.
</objective>

<execution_context>
@/Users/julianamacbook/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianamacbook/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-color-variable-consolidation/02-RESEARCH.md
@.planning/phases/01-bootstrap-scss-setup/01-01-SUMMARY.md
@src/angular/src/styles.scss
@src/angular/src/app/common/_bootstrap-variables.scss
@src/angular/src/app/common/_common.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define Bootstrap theme color overrides</name>
  <files>src/angular/src/app/common/_bootstrap-variables.scss</files>
  <action>
Update _bootstrap-variables.scss to define Bootstrap theme color overrides. This file is imported AFTER Bootstrap functions but BEFORE Bootstrap variables in styles.scss, so these will override Bootstrap defaults.

Add the following:

1. Bootstrap theme colors (override Bootstrap defaults):
   - $primary: #337BB7 (existing app primary blue)
   - $secondary: #79DFB6 (existing app teal)
   - $success: #198754 (Bootstrap default green - good for semantic "add" actions)
   - $danger: #dc3545 (Bootstrap default red - good for semantic "remove" actions)
   - $warning: #ffc107 (Bootstrap default yellow)
   - $info: #0dcaf0 (Bootstrap default cyan)

2. Application-specific variables derived from Bootstrap (define AFTER theme colors):
   Note: Cannot use shade-color() here because Bootstrap functions are imported before this file but variables after. These need to use hardcoded hex that match the shade-color output.

   Keep existing custom variables but comment that they should eventually derive from Bootstrap:
   - $primary-color, $primary-dark-color, $primary-light-color, $primary-lighter-color
   - $secondary-color, $secondary-light-color, $secondary-dark-color, $secondary-darker-color
   - $header-color, $header-dark-color
   - $logo-color

The existing variables in _common.scss should be MOVED to _bootstrap-variables.scss so they're available before Bootstrap compiles.
  </action>
  <verify>
Run `cd /Users/julianamacbook/seedsync/src/angular && npm run build` - build should succeed without errors.
  </verify>
  <done>
Bootstrap theme colors defined in _bootstrap-variables.scss, existing custom variables consolidated there.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update _common.scss to use Bootstrap variables</name>
  <files>src/angular/src/app/common/_common.scss</files>
  <action>
Update _common.scss to:

1. Remove variable definitions (they're now in _bootstrap-variables.scss)

2. Add @use directive to import Bootstrap variables:
   ```scss
   @use 'bootstrap-variables' as *;
   ```

3. Update %button placeholder to use Bootstrap's shade-color() function:
   - Change `&:active { background-color: #286090; }` to use shade-color($primary, 20%)

   Note: Since _common.scss is imported AFTER Bootstrap in styles.scss, we have access to Bootstrap's functions. Add the required @use directive:
   ```scss
   @use 'sass:color';
   @use '../../../node_modules/bootstrap/scss/functions' as bs;
   ```

   Then use: `background-color: bs.shade-color($primary-color, 20%);`

4. Keep the %button placeholder, $zindex-* variables, $sidebar-width, and breakpoint variables in _common.scss (these are application utilities, not color definitions).

5. The breakpoint variables ($small-max-width, $medium-min-width, etc.) should stay in _common.scss as they're layout-related.
  </action>
  <verify>
Run `cd /Users/julianamacbook/seedsync/src/angular && npm run build && npm test` - build and all 387 tests should pass.
  </verify>
  <done>
_common.scss uses Bootstrap shade-color() function, no hardcoded hex in %button:active state.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds without SCSS compilation errors
2. `npm test` runs all 387 unit tests with 0 failures
3. grep for `#286090` in _common.scss returns no results
4. _bootstrap-variables.scss contains `$danger`, `$success`, `$warning` definitions
</verification>

<success_criteria>
- Bootstrap theme colors ($primary, $secondary, $danger, $success, $warning, $info) defined in _bootstrap-variables.scss
- All application color variables consolidated in _bootstrap-variables.scss
- %button :active state uses shade-color() function instead of hardcoded #286090
- Build compiles successfully
- All unit tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/02-color-variable-consolidation/02-01-SUMMARY.md`
</output>
